<svg width="800" height="300" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <style>
            .text-label { font-family: sans-serif; font-size: 14px; fill: #555; text-anchor: middle; font-weight: bold;}
            .db-body { fill: #e0e0e0; stroke: #999; stroke-width: 2; }
            .db-top { fill: #f0f0f0; stroke: #999; stroke-width: 2; }

            /* Stile f端r Rohdaten (Dirty Data) */
            .raw-data-static { fill: #d9534f; opacity: 0.3; }
            .packet-dirty { fill: #d9534f; stroke: #c9302c; stroke-width: 1; }

            /* Stile f端r saubere Daten (Clean Data) */
            .clean-data-static { fill: #5bc0de; opacity: 0.3; }
            .packet-clean { fill: #5bc0de; stroke: #46b8da; stroke-width: 1; }

            /* Transformation Box Style */
            .transform-box { fill: #fff; stroke: #f0ad4e; stroke-width: 3; stroke-dasharray: 5,5; }
            .gear { fill: #f0ad4e; }

            /* --- ANIMATIONEN --- */

            /* Zahnrad drehen - KORRIGIERT */
            @keyframes spin {
            100% { transform: rotate(360deg); }
            }
            .gear-spinning {
            /* Der Drehpunkt ist exakt die Mitte des SVG (400,150), wo das Zahnrad definiert ist */
            transform-origin: 400px 150px;
            animation: spin 4s linear infinite;
            }

            /* Der Pfad f端r das schmutzige Paket (fliegt zur Mitte und verschwindet) */
            @keyframes moveDirty {
            0% { transform: translate(100px, 150px) scale(1) rotate(0deg); opacity: 1; }
            45% { transform: translate(380px, 150px) scale(0.8) rotate(180deg); opacity: 1; }
            50% { transform: translate(400px, 150px) scale(0.1) rotate(200deg); opacity: 0; }
            100% { transform: translate(400px, 150px) scale(0); opacity: 0; }
            }

            /* Der Pfad f端r das saubere Paket (erscheint in der Mitte und fliegt zum Ziel) */
            @keyframes moveClean {
            0% { transform: translate(400px, 150px) scale(0.1); opacity: 0; }
            50% { transform: translate(400px, 150px) scale(0.1); opacity: 0; }
            55% { transform: translate(420px, 150px) scale(0.8); opacity: 1; }
            100% { transform: translate(700px, 150px) scale(1); opacity: 1; }
            }

            /* Anwendung der Animationen auf die Pakete */
            .anim-packet-dirty-1 { animation: moveDirty 3s linear infinite; }
            .anim-packet-clean-1 { animation: moveClean 3s linear infinite; }

            .anim-packet-dirty-2 { animation: moveDirty 3s linear infinite; animation-delay: 1s; }
            .anim-packet-clean-2 { animation: moveClean 3s linear infinite; animation-delay: 1s; }

            .anim-packet-dirty-3 { animation: moveDirty 3s linear infinite; animation-delay: 2s; }
            .anim-packet-clean-3 { animation: moveClean 3s linear infinite; animation-delay: 2s; }

        </style>

        <g id="db-icon">
            <ellipse cx="60" cy="30" rx="60" ry="30" class="db-top"/>
            <path d="M0,30 v100 a60,30 0 0 0 120,0 v-100" class="db-body"/>
            <ellipse cx="60" cy="130" rx="60" ry="30" class="db-body" opacity="0.5" />
        </g>

        <polygon id="dirty-packet-shape" points="-15,-15 -10,0 -15,15 0,10 15,15 10,0 15,-15 0,-10" class="packet-dirty" />
        <rect id="clean-packet-shape" x="-12" y="-12" width="24" height="24" rx="4" ry="4" class="packet-clean" />

        <path id="gear-icon2" class="gear" d="M439.9,163.7h-8.3c-0.9,0-1.8-0.5-2.3-1.3l-4.2-7.3c-0.5-0.8-0.5-1.8,0-2.7l4.2-7.3c0.5-0.8,1.3-1.3,2.3-1.3h8.3c1.5,0,2.7-1.2,2.7-2.7v-9.6c0-1.5-1.2-2.7-2.7-2.7h-9.6c-1.5,0-2.7,1.2-2.7,2.7v8.3c0,0.9-0.5,1.8-1.3,2.3l-7.3,4.2c-0.8,0.5-1.8,0.5-2.7,0l-7.3-4.2c-0.8-0.5-1.3-1.3-1.3-2.3v-8.3c0-1.5-1.2-2.7-2.7-2.7h-9.6c-1.5,0-2.7,1.2-2.7,2.7v9.6c0,1.5,1.2,2.7,2.7,2.7h8.3c0.9,0,1.8,0.5,2.3,1.3l4.2,7.3c0.5,0.8,0.5,1.8,0,2.7l-4.2,7.3c-0.5,0.8-1.3,1.3-2.3,1.3h-8.3c-1.5,0-2.7,1.2-2.7,2.7v9.6c0,1.5,1.2,2.7,2.7,2.7h9.6c1.5,0,2.7-1.2,2.7-2.7v-8.3c0-0.9,0.5-1.8,1.3-2.3l7.3-4.2c0.8-0.5,1.8-0.5,2.7,0l7.3,4.2c0.8,0.5,1.3,1.3,1.3,2.3v8.3c0,1.5,1.2,2.7,2.7,2.7h9.6c1.5,0,2.7-1.2,2.7-2.7v-9.6C442.6,164.9,441.4,163.7,439.9,163.7z M400,165c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C415,158.3,408.3,165,400,165z"/>

        <defs>
            <linearGradient id="a" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="#6EE7B7"/>
                <stop offset="1" stop-color="#3B82F6"/>
            </linearGradient>
        </defs>
        <g id="gear-icon" transform="matrix(.43 0 0 .43 -38.1 -60.17)">
            <path fill="url(#a)" d="M160 250a96 96 0 1 1 192 0v170q0 70-96 20t-96-140Z"/>
            <ellipse cx="215" cy="260" fill="#1e3a8a" rx="18" ry="28"/>
            <ellipse cx="297" cy="260" fill="#1e3a8a" rx="18" ry="28"/>
        </g>

    </defs>

    <g transform="translate(40, 70)">
        <text x="60" y="-20" class="text-label">Source DB (Raw Data)</text>
        <use href="#db-icon" />
        <g clip-path="url(#db-clip)">
            <rect x="20" y="50" width="20" height="20" class="raw-data-static" transform="rotate(15)"/>
            <rect x="70" y="80" width="25" height="25" class="raw-data-static" transform="rotate(-10)"/>
            <rect x="40" y="110" width="15" height="15" class="raw-data-static" transform="rotate(30)"/>
        </g>
    </g>

    <g transform="translate(640, 70)">
        <text x="60" y="-20" class="text-label">Target DB (Clean Data)</text>
        <use href="#db-icon" style="fill: #e6f7ff; stroke: #46b8da;"/>
        <g>
            <rect x="30" y="60" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="50" y="60" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="70" y="60" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="30" y="85" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="50" y="85" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="70" y="85" width="15" height="15" class="clean-data-static" rx="2"/>
        </g>
    </g>

    <g transform="translate(300, 50)">
        <text x="100" y="0" class="text-label">ETL Process / Transform</text>
        <rect x="0" y="20" width="200" height="160" rx="10" ry="10" class="transform-box" />
    </g>

    <!-- use href="#gear-icon" class="gear-spinning"/ -->


    <use href="#dirty-packet-shape" class="anim-packet-dirty-1" />
    <use href="#clean-packet-shape" class="anim-packet-clean-1" />

    <use href="#dirty-packet-shape" class="anim-packet-dirty-2" />
    <use href="#clean-packet-shape" class="anim-packet-clean-2" />

    <use href="#dirty-packet-shape" class="anim-packet-dirty-3" />
    <use href="#clean-packet-shape" class="anim-packet-clean-3" />

</svg>
