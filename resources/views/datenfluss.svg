<svg width="800" height="300" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient id="ghost-gradient" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0" stop-color="#6EE7B7"/>
            <stop offset="1" stop-color="#3B82F6"/>
        </linearGradient>

        <g id="ghost-icon">
            <g transform="matrix(.43 0 0 .43 -38.1 -60.17)">
                <path fill="url(#ghost-gradient)" d="M160 250a96 96 0 1 1 192 0v170q0 70-96 20t-96-140Z"/>
                <ellipse cx="215" cy="260" fill="#1e3a8a" rx="18" ry="28"/>
                <ellipse cx="297" cy="260" fill="#1e3a8a" rx="18" ry="28"/>
            </g>
        </g>

        <style>
            .text-label { font-family: sans-serif; font-size: 14px; fill: #555; text-anchor: middle; font-weight: bold;}
            .text-label-small { font-family: sans-serif; font-size: 10px; fill: #999; text-anchor: middle; font-weight: normal;}
            .db-body { fill: #f0f0f0; stroke: #999; stroke-width: 1; }
            .db-top { fill: #f0f0f0; stroke: #999; stroke-width: 1; }

            /* Stile für Datenpakete */
            .raw-data-static { fill: #d9534f; opacity: 0.3; }
            .packet-dirty { fill: #d9534f; stroke: #c9302c; stroke-width: 1; }

            /* Stile für saubere Daten (Clean Data) */
            .clean-data-static { fill: #5bc0de; opacity: 0.3; }
            .packet-clean { fill: #5bc0de; stroke: #46b8da; stroke-width: 1; }

            /* Transformation Box Style */
            .transform-box { fill: #fff; stroke: #3B82F6; stroke-width: 3; stroke-dasharray: 5,5; }

            /* --- ANIMATIONEN --- */
            /* Geist Schweben (Symmetrisch um die Mitte) */
            @keyframes hover {
                0%, 100% { transform: translateY(8px); }
                50% { transform: translateY(-8px); }
            }
            .ghost-hovering {
                animation: hover 3s ease-in-out infinite;
            }


            /* Datenfluss Animationen */
            @keyframes moveDirty {
                0% { transform: translate(100px, 150px) scale(1) rotate(0deg); opacity: 1; }
                45% { transform: translate(380px, 150px) scale(0.8) rotate(180deg); opacity: 1; }
                50% { transform: translate(400px, 150px) scale(0.1) rotate(200deg); opacity: 0; }
                100% { transform: translate(400px, 150px) scale(0); opacity: 0; }
            }
            @keyframes moveClean {
                0% { transform: translate(400px, 150px) scale(0.1); opacity: 0; }
                50% { transform: translate(400px, 150px) scale(0.1); opacity: 0; }
                55% { transform: translate(420px, 150px) scale(0.8); opacity: 1; }
                100% { transform: translate(700px, 150px) scale(1); opacity: 1; }
            }

            .anim-packet-dirty-1 { animation: moveDirty 3s linear infinite; }
            .anim-packet-clean-1 { animation: moveClean 3s linear infinite; }
            .anim-packet-dirty-2 { animation: moveDirty 3s linear infinite; animation-delay: 1s; }
            .anim-packet-clean-2 { animation: moveClean 3s linear infinite; animation-delay: 1s; }
            .anim-packet-dirty-3 { animation: moveDirty 3s linear infinite; animation-delay: 2s; }
            .anim-packet-clean-3 { animation: moveClean 3s linear infinite; animation-delay: 2s; }
        </style>

        <g id="db-icon">
            <g transform="translate(-25, 0) scale(7)">
                <path d="M3 5V19A9 3 0 0 0 21 19V5" class="db-body"/>
                <ellipse cx="12" cy="5" rx="9" ry="3" class="db-top"/>
                <path d="M3 12A9 3 0 0 0 21 12" class="db-body"/>
            </g>
        </g>
        <g id="db-icon-target">
            <g transform="translate(-25, 0) scale(7)">
                <path d="M3 5V19A9 3 0 0 0 21 19V5" class="db-body" style="fill: #e6f7ff; stroke: #46b8da;"/>
                <ellipse cx="12" cy="5" rx="9" ry="3" class="db-top" style="fill: #e6f7ff; stroke: #46b8da;"/>
                <path d="M3 12A9 3 0 0 0 21 12" class="db-body" style="fill: #e6f7ff; stroke: #46b8da;"/>
            </g>
        </g>
        <polygon id="dirty-packet-shape" points="-15,-15 -10,0 -15,15 0,10 15,15 10,0 15,-15 0,-10" class="packet-dirty" />
        <rect id="clean-packet-shape" x="-12" y="-12" width="24" height="24" rx="4" ry="4" class="packet-clean" />
    </defs>

    <g transform="translate(40, 70)">
        <text x="60" y="-20" class="text-label">Source DB</text>
        <text x="60" y="-8" class="text-label-small">(Raw Data)</text>
        <use href="#db-icon" />
        <g clip-path="url(#db-clip)">
            <rect x="30" y="50" width="20" height="20" class="raw-data-static" transform="rotate(15)"/>
            <rect x="70" y="80" width="25" height="25" class="raw-data-static" transform="rotate(-10)"/>
            <rect x="90" y="90" width="15" height="15" class="raw-data-static" transform="rotate(30)"/>
        </g>
    </g>

    <g transform="translate(640, 70)">
        <text x="60" y="-20" class="text-label">Target DB</text>
        <text x="60" y="-8" class="text-label-small">(Clean Data)</text>
        <use href="#db-icon-target"/>
        <g>
            <rect x="30" y="70" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="50" y="70" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="70" y="70" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="30" y="115" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="50" y="115" width="15" height="15" class="clean-data-static" rx="2"/>
            <rect x="70" y="115" width="15" height="15" class="clean-data-static" rx="2"/>
        </g>
    </g>

    <g transform="translate(300, 50)">
        <text x="100" y="0" class="text-label">ETL Process / Transform</text>
        <text x="100" y="12" class="text-label-small">(App Transformation)</text>
        <rect x="0" y="20" width="200" height="160" rx="10" ry="10" class="transform-box" />
    </g>

    <use href="#dirty-packet-shape" class="anim-packet-dirty-1" />
    <use href="#clean-packet-shape" class="anim-packet-clean-1" />

    <use href="#dirty-packet-shape" class="anim-packet-dirty-2" />
    <use href="#clean-packet-shape" class="anim-packet-clean-2" />

    <use href="#dirty-packet-shape" class="anim-packet-dirty-3" />
    <use href="#clean-packet-shape" class="anim-packet-clean-3" />

    <g transform="translate(400, 150)" class="ghost-hovering">
        <use href="#ghost-icon" x="325" y="77" />
    </g>
</svg>
